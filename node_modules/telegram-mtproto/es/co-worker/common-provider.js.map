{"version":3,"sources":["../../src/co-worker/common-provider.js"],"names":["isNode","testWebCrypto","webCrypto","window","crypto","subtle","webkitSubtle","msCrypto","featureDetector","useWebCrypto","sha1Crypto","sha256Crypto","use","webworker","cryptoCommon"],"mappings":"AACA,OAAOA,MAAP,MAAmB,aAAnB;;AAWA,IAAMC,gBAAgB,MAA4B;AAChD,MAAIC,kBAAJ;;AAEA,MAAI;AACF;AACA,QAAI,OAAOC,MAAP,KAAkB,WAAtB,EAAmC;AACjC,UAAIA,OAAOC,MAAX,EAAmB;AACjBF,oBACEC,OAAOC,MAAP,CAAcC,MAAd,IACGF,OAAOC,MAAP,CAAcE,YAFnB;AAGD,OAJD,MAIO,IAAIH,OAAOI,QAAX,EAAqB;AAC1BL,oBAAYC,OAAOI,QAAP,CAAgBF,MAA5B;AACD;AACF;AACF,GAXD,SAWU;AACR,WAAOH,SAAP;AACD;AACF,CAjBD;;AAmBA,OAAO,IAAMM,kBAAkB,MAAM;AACnC,MAAMN,YAAYD,eAAlB;AACA,MAAMQ,eAAe,CAAC,CAACP,SAAvB;AACA,MAAMQ,aAAaD,YAAnB;AACA,MAAME,eAAeF,YAArB;AACA,SAAO;AACLP,aADK;AAELU,SAAK;AACHV,iBAAWO,YADR;AAEHC,gBAFG;AAGHC,kBAHG;AAIHE,iBAAW,CAACb;AAJT;AAFA,GAAP;AASD,CAdM;;AAgBP,IAAMc,eAAeN,iBAArB;;AAEA,eAAeM,YAAf","file":"common-provider.js","sourcesContent":["//@flow\nimport isNode from 'detect-node'\n\ntype WebCryptoType = {\n  digest(\n    conf: {\n      name: 'SHA-1' | 'SHA-256'\n    },\n    data: number[] | Uint8Array | ArrayBuffer\n  ): Promise<ArrayBuffer>\n}\n\nconst testWebCrypto = (): void | WebCryptoType => {\n  let webCrypto\n\n  try {\n    /* eslint-disable */\n    if (typeof window !== 'undefined') {\n      if (window.crypto) {\n        webCrypto =\n          window.crypto.subtle\n          || window.crypto.webkitSubtle\n      } else if (window.msCrypto) {\n        webCrypto = window.msCrypto.subtle\n      }\n    }\n  } finally {\n    return webCrypto\n  }\n}\n\nexport const featureDetector = () => {\n  const webCrypto = testWebCrypto()\n  const useWebCrypto = !!webCrypto\n  const sha1Crypto = useWebCrypto\n  const sha256Crypto = useWebCrypto\n  return {\n    webCrypto,\n    use: {\n      webCrypto: useWebCrypto,\n      sha1Crypto,\n      sha256Crypto,\n      webworker: !isNode,\n    }\n  }\n}\n\nconst cryptoCommon = featureDetector()\n\nexport default cryptoCommon\n"]}