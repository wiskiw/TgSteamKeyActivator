{"version":3,"sources":["../../src/state/helpers.js"],"names":["doubleCreator","actionSelector","action","stream","tag","meta","x","getType","Object","defineProperties","value","enumerable","type"],"mappings":";;;;;QAkCgBA,a,GAAAA,a;;AAhChB;;AACA;;AACA;;AACA;;AAEA;;AACA;;AACA;;;;;;AAgBA,IAAMC,iBACHC,MAAD,IACGC,MAAD,IAAY,uBAAOD,MAAP,EAAeC,MAAf,CAFhB;;AASO,SAASH,aAAT,CACLI,GADK,EACMC,IADN,EAE4B;AACjC,MAAMH,SAAoC,OAAOG,IAAP,KAAgB,UAAhB,GACtC,4BAAaD,GAAb,EAAmBE,CAAD,IAAOA,CAAzB,EAA4BD,IAA5B,CADsC,GAEtC,4BAAaD,GAAb,CAFJ;AAGA,MAAMD,SAAuCF,eAAeC,OAAOK,OAAP,EAAf,CAA7C;AACAC,SAAOC,gBAAP,CAAwBP,MAAxB,EAAgC;AAC9BC,YAAQ;AACNO,aAAYP,MADN;AAENQ,kBAAY;AAFN,KADsB;AAK9BC,UAAM;AACJF,aAAYR,OAAOK,OAAP,EADR;AAEJI,kBAAY;AAFR;AALwB,GAAhC;AAUA,SAAOT,MAAP;AACD","file":"helpers.js","sourcesContent":["//@flow\n\nimport { createAction } from 'redux-act'\nimport { type AxiosXHR } from 'axios'\nimport { select } from 'redux-most'\nimport { Stream } from 'most'\n\nimport { NetMessage } from '../service/networker/net-message'\nimport { NetworkerThread } from '../service/networker'\nimport ApiRequest from '../service/main/request'\n\ntype ActionCreator<Type, Payload> =\n  (stream: Stream<any>) =>\n    Stream<Action<Type, Payload>>\n\ndeclare class Act<Tag = 'action'> { toString(): Tag }\n\ntype Action<Tag = 'action', Payload = {}, Meta = void> = {\n  (payload: Payload, meta: Meta): Action<Tag, Payload>,\n  // (payload: Payload): Action<Tag, Payload>,\n  getType(): Tag,\n  type: Tag,\n  payload: Payload,\n}\n\nconst actionSelector =\n  (action: any): ActionCreator<any, any> =>\n    (stream) => select(action, stream)\n\nexport type ActionPair<Type, Payload, Meta = void> = Action<Type, Payload, Meta> & {\n  stream: ActionCreator<Type, Payload>,\n  type: Type,\n}\n\nexport function doubleCreator<Type, Payload, Meta>(\n  tag: Type, meta?: (pl: Payload, meta: Meta) => any\n): ActionPair<Type, Payload, Meta> {\n  const action: ActionPair<Type, Payload> = typeof meta === 'function'\n    ? createAction(tag, (x) => x, meta)\n    : createAction(tag)\n  const stream: ActionCreator<Type, Payload> = actionSelector(action.getType())\n  Object.defineProperties(action, {\n    stream: {\n      value     : stream,\n      enumerable: false,\n    },\n    type: {\n      value     : action.getType(),\n      enumerable: false,\n    }\n  })\n  return action\n}\n\n"]}