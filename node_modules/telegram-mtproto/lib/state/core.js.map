{"version":3,"sources":["../../src/state/core.js"],"names":["log","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","configureStore","rootReducer","initialState","epicMiddleware","enhancers","store","subscribe","next","getState","dispatch"],"mappings":";;;;;;;AACA;;;;AACA;;AACA;;AAEA;;;;AAGA;;;;AACA;;;;AACA;;AACA;;;;AALA,IAAMA,MAAM,uBAAO,YAAnB;AAFA;;;AASA,IAAIC,iCAAJ;;AAEA,IAAI,yBAAW,KAAX,IAAoB,OAAOC,MAAP,KAAkB,QAA1C,EACED,mBACEC,OAAOC,oCAAP,kBADF;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,cAAT,CAAwBC,WAAxB,EAAwCC,YAAxC,EAAyD;AACvD,MAAMC,iBAAiB,oDAAvB;AACA,MAAMC,YAAYP,iBAChB;AAEE;AACAM,gBAHF,CADgB,CAAlB;;AAQA,MAAME,QAAQ,wBACZJ,WADY,EAEZC,YAFY,EAGZE,SAHY,CAAd;;AAKA,SAAOC,KAAP;AACD;;AAED,IAAMA,QAAQL,kCAA4B,EAA5B,CAAd;;AAEAK,MAAMC,SAAN,CACE,MAAM,mBAAWC,IAAX,CAAgBF,MAAMG,QAAN,EAAhB,CADR;;kBAIeH,K;AAER,IAAMI,8BAAWJ,MAAMI,QAAvB","file":"core.js","sourcesContent":["//@flow\nimport isNode from 'detect-node'\nimport { createStore, applyMiddleware, compose } from 'redux'\nimport { createEpicMiddleware } from 'redux-most'\n// import { composeWithDevTools } from 'remote-redux-devtools'\nimport Logger from 'mtproto-logger'\nconst log = Logger`redux-core`\n\nimport rootReducer from './reducer'\nimport rootEpic from './epic'\nimport { rootSignal } from './signal'\nimport { skipEmptyMiddleware } from './middleware'\n\nlet composeEnhancers = compose\n\nif (isNode === false && typeof window === 'object')\n  composeEnhancers =\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\n\n// composeEnhancers = composeWithDevTools({\n//   realtime: true,\n//   hostname: 'localhost',\n//   port    : 8000,\n//   maxAge  : 200\n// })\nfunction configureStore(rootReducer: *, initialState: *) {\n  const epicMiddleware = createEpicMiddleware(rootEpic)\n  const enhancers = composeEnhancers(\n    applyMiddleware(\n      skipEmptyMiddleware,\n      // debounceMiddleware,\n      epicMiddleware\n    )\n  )\n\n  const store = createStore(\n    rootReducer,\n    initialState,\n    enhancers)\n\n  return store\n}\n\nconst store = configureStore(rootReducer, {})\n\nstore.subscribe(\n  () => rootSignal.next(store.getState())\n)\n\nexport default store\n\nexport const dispatch = store.dispatch\n"]}