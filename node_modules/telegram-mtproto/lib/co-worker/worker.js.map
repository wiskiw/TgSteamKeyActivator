{"version":3,"sources":["../../src/co-worker/worker.js"],"names":["console","info","selectTask","taskName","factorize","modPow","sha1Hash","aesEncrypt","aesDecrypt","Error","runTask","ctx","task","taskID","data","fn","result","postMessage","onmessage","msg"],"mappings":";;AAIA;;;;;;AAGAA,QAAQC,IAAR,CAAa,0BAAb;;AALA;;AAOA,IAAMC,aAAcC,QAAD,IAAyB;AAC1C,UAAQA,QAAR;AACE,SAAK,WAAL;AAAoB,aAAO,gBAAMC,SAAb;AACpB,SAAK,SAAL;AAAoB,aAAO,gBAAMC,MAAb;AACpB,SAAK,WAAL;AAAoB,aAAO,gBAAMC,QAAb;AACpB,SAAK,aAAL;AAAoB,aAAO,gBAAMC,UAAb;AACpB,SAAK,aAAL;AAAoB,aAAO,gBAAMC,UAAb;AACpB;AACE,YAAM,IAAIC,KAAJ,CAAW,iBAAgBN,QAAS,EAApC,CAAN;AAPJ;AASD,CAVD;;AAYA,IAAMO,UAAWC,GAAD,IAAe;AAC7B,MAAM,EAAEC,IAAF,EAAQC,MAAR,EAAgBC,IAAhB,KAAyBH,GAA/B;AACA,MAAMI,KAAKb,WAAWU,IAAX,CAAX;AACA,MAAMI,SAASD,GAAGD,IAAH,CAAf;AACA;AACAG,cAAY,EAAEJ,MAAF,EAAUG,MAAV,EAAZ;AACD,CAND;;AAQAE,YAAaC,GAAD,IAAwB;AAClC,MAAI,OAAOA,IAAIL,IAAX,KAAoB,QAAxB,EAAkC;AAChC,QAAIK,IAAIL,IAAJ,KAAa,EAAjB,EACEd,QAAQC,IAAR,CAAa,mBAAb,EADF,KAGED,QAAQC,IAAR,CAAa,4BAAb,EAA2CkB,IAAIL,IAA/C;AACF;AACD;AACDJ,UAAQS,IAAIL,IAAZ;AACD,CATD;;AAWA;AACAG,YAAY,OAAZ","file":"worker.js","sourcesContent":["//@flow\n\n// import type { postMessage } from './index.h'\n\nimport tasks from './tasks'\nimport type { TasksType, Task, WorkerMessage } from './index.h'\n\nconsole.info('Crypto worker registered')\n\nconst selectTask = (taskName: TasksType) => {\n  switch (taskName) {\n    case 'factorize'  : return tasks.factorize\n    case 'mod-pow'    : return tasks.modPow\n    case 'sha1-hash'  : return tasks.sha1Hash\n    case 'aes-encrypt': return tasks.aesEncrypt\n    case 'aes-decrypt': return tasks.aesDecrypt\n    default:\n      throw new Error(`Unknown task: ${taskName}`)\n  }\n}\n\nconst runTask = (ctx: Task) => {\n  const { task, taskID, data } = ctx\n  const fn = selectTask(task)\n  const result = fn(data)\n  //$FlowIssue\n  postMessage({ taskID, result })\n}\n\nonmessage = (msg: WorkerMessage) => {\n  if (typeof msg.data === 'string') {\n    if (msg.data === '')\n      console.info('empty crypto task')\n    else\n      console.info('crypto task string message', msg.data)\n    return\n  }\n  runTask(msg.data)\n}\n\n//$FlowIssue\npostMessage('ready')\n"]}