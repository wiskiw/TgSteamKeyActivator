{"version":3,"sources":["../../src/plugins/memory-storage.js"],"names":["MemoryStorage","constructor","data","store","Map","key","value","set","get","resolve","val","remove","keys","results","map","e","delete","clear"],"mappings":";;;;;;;AAEA;;;;AAEA;;;;AAKA;;;;;;;;AAQO,MAAMA,aAAN,CAA4C;;AAIjDC,cAAYC,IAAZ,EAAyC;AAAA,SAHzCC,KAGyC,GAHf,IAAIC,GAAJ,EAGe;;AACvC,QAAIF,QAAQ,IAAZ;AACE,2BAA2B,oBAAQA,IAAR,CAA3B;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,YAAW,CAACG,IAAD,EAAMC,MAAN,CAAX;;AACE,aAAKH,KAAL,CAAWI,GAAX,CAAeF,IAAf,EAAoBC,MAApB;AADF;AADF;AAGD;;AAGDE,MAAIH,GAAJ,EAAiB;AACf,WAAO,mBAAQI,OAAR,CAAgB,KAAKN,KAAL,CAAWK,GAAX,CAAeH,GAAf,CAAhB,CAAP;AACD;;AAEDE,MAAIF,GAAJ,EAAiBK,GAAjB,EAA2B;AACzB,SAAKP,KAAL,CAAWI,GAAX,CAAeF,GAAf,EAAoBK,GAApB;AACA,WAAO,mBAAQD,OAAR,EAAP;AACD;;AAEDE,SAAO,GAAGC,IAAV,EAA0B;AACxB,QAAMC,UAAUD,KAAKE,GAAL,CAASC,KAAK,KAAKZ,KAAL,CAAWa,MAAX,CAAkBD,CAAlB,CAAd,CAAhB;AACA,WAAO,mBAAQN,OAAR,CAAgBI,OAAhB,CAAP;AACD;;AAEDI,UAAQ;AACN,SAAKd,KAAL,CAAWc,KAAX;AACA,WAAO,mBAAQR,OAAR,EAAP;AACD;AA5BgD;;QAAtCT,a,GAAAA,a;kBA+BEA,a","file":"memory-storage.js","sourcesContent":["//@flow\n\nimport Promise from 'bluebird'\n\nimport { toPairs } from 'ramda'\n\nimport type { AsyncStorage } from './index.h'\n\n\n/**\n * Basic storage implementation.\n * Saves data in memory\n *\n * @export\n * @class MemoryStorage\n * @implements {AsyncStorage}\n */\nexport class MemoryStorage implements AsyncStorage {\n  store: Map<string, any> = new Map\n\n\n  constructor(data?: { [key: number]: * }) {\n    if (data != null)\n      for (const [key, value] of toPairs(data))\n        this.store.set(key, value)\n  }\n\n\n  get(key: string) {\n    return Promise.resolve(this.store.get(key))\n  }\n\n  set(key: string, val: any) {\n    this.store.set(key, val)\n    return Promise.resolve()\n  }\n\n  remove(...keys: string[]) {\n    const results = keys.map(e => this.store.delete(e))\n    return Promise.resolve(results)\n  }\n\n  clear() {\n    this.store.clear()\n    return Promise.resolve()\n  }\n}\n\nexport default MemoryStorage"]}