{"version":3,"sources":["../../../src/service/main/request.js"],"names":["ApiRequest","constructor","data","options","invoke","requestID","Object","defineProperty","value","enumerable","writable"],"mappings":";;;;;;AAEA;;;;AACA;;;;;;AAaA,MAAMA,UAAN,CAAiB;AAOfC,cAAYC,IAAZ,EACYC,OADZ,EAEYC,MAFZ,EAE8C;AAAA,SAP9CC,SAO8C,GAP1B,kBAO0B;;AAC5C,SAAKH,IAAL,GAAYA,IAAZ;AACA,SAAKC,OAAL,GAAeA,OAAf;AACA;AACAG,WAAOC,cAAP,CAAsB,IAAtB,EAA4B,OAA5B,EAAqC;AACnCC,aAAY,sBADuB;AAEnCC,kBAAY,KAFuB;AAGnCC,gBAAY;AAHuB,KAArC;AAKAJ,WAAOC,cAAP,CAAsB,IAAtB,EAA4B,YAA5B,EAA0C;AACxCC,aAAY,sBAD4B;AAExCC,kBAAY,KAF4B;AAGxCC,gBAAY;AAH4B,KAA1C;AAKAJ,WAAOC,cAAP,CAAsB,IAAtB,EAA4B,QAA5B,EAAsC;AACpCC,aAAY,MAAM;AAAEJ,eAAO,IAAP;AAAc,OADE;AAEpCK,kBAAY,KAFwB;AAGpCC,gBAAY;AAHwB,KAAtC;AAKD;AA5Bc;;kBAiCFV,U","file":"request.js","sourcesContent":["//@flow\n\nimport uuid from 'uuid/v4'\nimport { type Defer } from '../../util/defer'\nimport blueDefer from '../../util/defer'\n\nexport type ApiMethod = {\n  method: string,\n  params: { [arg: string]: * }\n}\n\nexport type RequestOptions = {|\n  dc: number | '@@home',\n  requestID: string\n|}\n\nclass ApiRequest {\n  data: ApiMethod\n  requestID: string = uuid()\n  defer: Defer\n  deferFinal: Defer\n  invoke: () => void\n  options: RequestOptions\n  constructor(data: ApiMethod,\n              options: RequestOptions,\n              invoke: (val: ApiRequest) => any) {\n    this.data = data\n    this.options = options\n    // this.messageID = options.messageID\n    Object.defineProperty(this, 'defer', {\n      value     : blueDefer(),\n      enumerable: false,\n      writable  : true,\n    })\n    Object.defineProperty(this, 'deferFinal', {\n      value     : blueDefer(),\n      enumerable: false,\n      writable  : true,\n    })\n    Object.defineProperty(this, 'invoke', {\n      value     : () => { invoke(this) },\n      enumerable: false,\n      writable  : true,\n    })\n  }\n}\n\nexport type { ApiRequest as Request }\n\nexport default ApiRequest\n"]}