import { format } from 'util';
import { supportsColor, stripColor } from 'chalk';

const stream = process.stdout;
const write = e => {
  stream.write(`\n${e}`);
};

const replaceModuleName = str => str.replace('telegram-mtproto:', '');

let prepareString = replaceModuleName;
if (!supportsColor) prepareString = str => stripColor(replaceModuleName(str));

const formatLines = str => format(...str).split('\n');

const writer = log => (...str) => {
  const splits = formatLines(str);
  const result = splits.map(prepareString);
  result.forEach(write);
};

export default writer;
//# sourceMappingURL=formatter.js.map